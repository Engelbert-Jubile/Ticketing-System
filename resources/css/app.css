@import url('https://fonts.googleapis.com/icon?family=Material+Icons&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
@import url('https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Page theme base styling */

/* Page theme base styling */
.page-theme {
  min-height: 100vh;
  width: 100%;
  position: relative;
}

.page-shell {
  width: 100%;
  margin-left: auto;
  margin-right: auto;
  max-width: 100%;
}

.page-shell--wide {
  max-width: 1280px;
  margin-left: auto;
  margin-right: auto;
  padding-left: 1rem;
  padding-right: 1rem;
}

@media (max-width: 768px) {
  .page-shell--wide {
    padding-left: 0.75rem;
    padding-right: 0.75rem;
  }
}

:root {
  --sb-max: 18rem;
  --sb-mini: 4.75rem;
  --ease-smooth: cubic-bezier(0.22, 0.61, 0.36, 1);
  --app-sidebar-space: 0px;
}

/* Basic theme transitions */
html,
body {
  -webkit-transition:
    background-color 0.35s var(--ease-smooth),
    color 0.35s var(--ease-smooth);
  transition:
    background-color 0.35s var(--ease-smooth),
    color 0.35s var(--ease-smooth);
}

/* Sidebar base styles */
.sidebar {
  width: var(--sb-w, var(--sb-max));
  -webkit-transition:
    width 0.38s var(--ease-smooth),
    -webkit-transform 0.32s var(--ease-smooth);
  transition:
    width 0.38s var(--ease-smooth),
    transform 0.32s var(--ease-smooth);
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}

/* Mini sidebar styles */
.sidebar.mini .nav-li > a,
.sidebar.mini .nav-li > button {
  -webkit-box-pack: center;
  -ms-flex-pack: center;
  justify-content: center;
  padding-left: 0.5rem;
  padding-right: 0.5rem;
}

/* Sidebar labels */
.sidebar .nav-label {
  margin-left: 0.5rem;
}

.sidebar.mini .nav-label {
  display: none !important;
}

/* Ripple effect */
.sb-ripple {
  position: relative;
  overflow: hidden;
}

.ripple-ink {
  position: absolute;
  pointer-events: none;
  border-radius: 50%;
  -webkit-transform: scale(0);
  transform: scale(0);
  -webkit-animation: ripple 0.5s linear;
  animation: ripple 0.5s linear;
  background-color: rgba(255, 255, 255, 0.35);
}

@-webkit-keyframes ripple {
  to {
    -webkit-transform: scale(2);
    transform: scale(2);
    opacity: 0;
  }
}

@keyframes ripple {
  to {
    -webkit-transform: scale(2);
    transform: scale(2);
    opacity: 0;
  }
}

/* ====== SIDEBAR STYLES ====== */
.sidebar {
  width: var(--sb-w, var(--sb-max));
  transition:
    width 0.38s var(--ease-smooth),
    transform 0.32s var(--ease-smooth);
  will-change: width, transform;
  contain: layout paint size;
  backface-visibility: hidden;
  -webkit-font-smoothing: antialiased;
}

.sidebar.mini .menu .nav-li > a,
.sidebar.mini .menu .nav-li > button {
  justify-content: center;
  padding-left: 0.5rem;
  padding-right: 0.5rem;
}

.sidebar .nav-label {
  margin-left: 0.5rem;
}

.sidebar.mini .nav-label {
  display: none !important;
}

/* ====== RIPPLE EFFECT ====== */
.sb-ripple {
  position: relative;
  overflow: hidden;
}

.ripple-ink {
  position: absolute;
  pointer-events: none;
  border-radius: 50%;
  transform: scale(0);
  animation: ripple 0.5s linear;
  background-color: rgba(255, 255, 255, 0.35);
}

@keyframes ripple {
  to {
    transform: scale(2);
    opacity: 0;
  }
}

/* ====== DARK MODE GLOBAL NORMALIZATION + soft transitions ====== */
@layer base {
  html,
  body {
    transition:
      background-color 0.35s var(--ease-smooth, cubic-bezier(0.22, 0.61, 0.36, 1)),
      color 0.35s var(--ease-smooth, cubic-bezier(0.22, 0.61, 0.36, 1));
  }
  body {
    @apply text-slate-900 dark:text-slate-100 bg-slate-100 dark:bg-slate-900;
  }
  a {
    @apply text-blue-600 dark:text-blue-400;
  }
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    @apply text-slate-900 dark:text-slate-100;
  }
  p,
  span,
  li,
  dt,
  dd,
  small {
    @apply text-slate-700 dark:text-slate-300;
  }

  input[type='text'],
  input[type='email'],
  input[type='password'],
  input[type='number'],
  input[type='search'],
  select,
  textarea {
    @apply bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 border border-slate-300 dark:border-slate-600 placeholder-slate-400 dark:placeholder-slate-400 focus:border-blue-500 dark:focus:border-blue-400 focus:ring-blue-500 dark:focus:ring-blue-400;
  }
  label,
  .form-label {
    @apply text-slate-700 dark:text-slate-300;
  }
  .form-help,
  .form-hint,
  .text-muted {
    @apply text-slate-500 dark:text-slate-400;
  }
  input:disabled,
  select:disabled,
  textarea:disabled {
    @apply bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-300 border-slate-200 dark:border-slate-600;
  }
  button {
    @apply text-slate-900 dark:text-slate-100;
  }

  table {
    @apply w-full text-left text-sm text-slate-900 dark:text-slate-100;
  }
  thead tr {
    @apply bg-slate-50 dark:bg-slate-800;
  }
  thead th {
    @apply font-semibold border-b border-slate-200 dark:border-slate-700;
  }
  tbody tr {
    @apply border-b border-slate-200 dark:border-slate-700;
  }
  tbody tr:nth-child(odd) {
    @apply bg-white dark:bg-slate-900;
  }
  tbody tr:nth-child(even) {
    @apply bg-slate-50 dark:bg-slate-800;
  }

  .card,
  .panel,
  .section,
  .content-box {
    @apply bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 rounded-lg;
  }
  hr {
    @apply border-slate-300 dark:border-slate-700;
  }

  @media (prefers-reduced-motion: reduce) {
    * {
      animation: none !important;
      transition: none !important;
      scroll-behavior: auto !important;
    }
  }
}

/* Sidebar khusus + theme toggle animation */
@layer components {
  .sidebar {
    @apply bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100;
  }
  .sidebar a,
  .sidebar button {
    @apply text-slate-900 dark:text-slate-100;
  }
  /* pastikan ikon bisa di-transform untuk animasi */
  .sidebar .material-icons {
    display: inline-block;
    will-change: transform;
    user-select: none;
    transition:
      color 0.25s var(--ease-smooth, cubic-bezier(0.22, 0.61, 0.36, 1)),
      transform 0.25s var(--ease-smooth, cubic-bezier(0.22, 0.61, 0.36, 1));
  }
  /* cegah text selection biru ketika spam klik di menu */
  .sidebar .nav-li > a,
  .sidebar .nav-li > button,
  .sidebar .nav-li > form > button,
  .sidebar .nav-li .nav-label {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
  }

  /* Theme toggle: sunâ‡„moon morph */
  .theme-toggle .sun,
  .theme-toggle .moon {
    transition:
      opacity 0.35s var(--ease-smooth, cubic-bezier(0.22, 0.61, 0.36, 1)),
      transform 0.45s var(--ease-smooth, cubic-bezier(0.22, 0.61, 0.36, 1));
    transform-origin: 50% 50%;
  }
  .theme-toggle .sun {
    opacity: 1;
    transform: scale(1) rotate(0deg);
  }
  .theme-toggle .moon {
    opacity: 0;
    transform: scale(0.75) rotate(-20deg);
  }
  .dark .theme-toggle .sun {
    opacity: 0;
    transform: scale(0.75) rotate(90deg);
  }
  .dark .theme-toggle .moon {
    opacity: 1;
    transform: scale(1) rotate(0deg);
  }
}

/* ===================== SIDEBAR FINAL OVERRIDES ===================== */
@layer components {
  .sidebar .nav-li.nav-li::before,
  .sidebar .nav-li.nav-li:hover::before,
  .sidebar .nav-li.nav-li:focus-within::before,
  .sidebar .nav-li.nav-li[data-open='true']::before {
    width: 0 !important;
    background: transparent !important;
  }

  .sidebar .nav-li > ul,
  .sidebar .nav-li > ul * {
    background: transparent !important;
    box-shadow: none !important;
    border-color: transparent !important;
  }
  .sidebar .nav-li > ul a {
    transition:
      background-color 0.18s var(--ease-smooth, cubic-bezier(0.22, 0.61, 0.36, 1)),
      color 0.18s var(--ease-smooth, cubic-bezier(0.22, 0.61, 0.36, 1));
    border-radius: 0.75rem;
  }

  .sidebar .nav-li > a .material-icons,
  .sidebar .nav-li > button .material-icons,
  .sidebar .nav-li > form > button .material-icons {
    color: currentColor !important;
  }

  .sidebar .nav-li > a,
  .sidebar .nav-li > button,
  .sidebar .nav-li > form > button {
    position: relative;
    z-index: 0;
    border-radius: 0.75rem;
    background: transparent !important;
    transition:
      background-color 0.2s var(--ease-smooth, cubic-bezier(0.22, 0.61, 0.36, 1)),
      color 0.2s var(--ease-smooth, cubic-bezier(0.22, 0.61, 0.36, 1)),
      box-shadow 0.2s var(--ease-smooth, cubic-bezier(0.22, 0.61, 0.36, 1)),
      filter 0.2s var(--ease-smooth, cubic-bezier(0.22, 0.61, 0.36, 1));
  }
  .sidebar .nav-li > a::before,
  .sidebar .nav-li > button::before,
  .sidebar .nav-li > form > button::before {
    content: '';
    position: absolute;
    inset: 0;
    width: 0;
    /* default: render behind content but inside the same stacking context */
    z-index: -1;
    border-radius: 0.75rem;
    transition: width 0.2s ease-in;
    background: transparent;
  }
  /* Non-mini: gunakan ::before pada link/button saja (bukan <li>), sehingga hover tidak menyebar */
  .sidebar.hover-ready:not(.mini) .nav-li > a:hover::before,
  .sidebar.hover-ready:not(.mini) .nav-li > a:focus-visible::before,
  .sidebar.hover-ready:not(.mini) .nav-li > button:hover::before,
  .sidebar.hover-ready:not(.mini) .nav-li > button:focus-visible::before,
  .sidebar.hover-ready:not(.mini) .nav-li > form > button:hover::before,
  .sidebar.hover-ready:not(.mini) .nav-li > form > button:focus-visible::before {
    width: 100% !important;
  }
  /* Simulated hover class for programmatic focus (Dashboard on enter) */
  .sidebar:not(.mini) .nav-li > a.sim-hover::before,
  .sidebar:not(.mini) .nav-li > button.sim-hover::before,
  .sidebar:not(.mini) .nav-li > form > button.sim-hover::before {
    width: 100% !important;
  }

  /* MINI MODE: badge bulat simetris (kembali ke versi sebelumnya) */
  .sidebar.mini .nav-li::before {
    width: 0 !important;
    background: transparent !important;
  }
  .sidebar.mini .nav-li > a::before,
  .sidebar.mini .nav-li > button::before,
  .sidebar.mini .nav-li > form > button::before {
    inset: auto;
    left: 50%;
    top: 50%;
    width: var(--mini-badge, 2.75rem) !important;
    height: var(--mini-badge, 2.75rem) !important;
    border-radius: 9999px;
    pointer-events: none;
    /* FIX: in mini mode keep the badge above the sidebar background
       so the icon (which turns white on active) never disappears. */
    z-index: 0;
    transform: translate(-50%, -50%) scale(0.9);
    opacity: 0;
    transition:
      transform 0.18s var(--ease-smooth),
      opacity 0.18s var(--ease-smooth),
      background-color 0.18s var(--ease-smooth);
  }
  .sidebar.hover-ready.mini .nav-li > a:hover::before,
  .sidebar.hover-ready.mini .nav-li > button:hover::before,
  .sidebar.hover-ready.mini .nav-li > form > button:hover::before,
  .sidebar.hover-ready.mini .nav-li > a:focus-visible::before,
  .sidebar.hover-ready.mini .nav-li > button:focus-visible::before,
  .sidebar.hover-ready.mini .nav-li > form > button:focus-visible::before {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
    width: var(--mini-badge, 2.75rem) !important;
    height: var(--mini-badge, 2.75rem) !important;
    border-radius: 9999px;
  }
  .sidebar.mini .nav-li > a.sim-hover::before,
  .sidebar.mini .nav-li > button.sim-hover::before,
  .sidebar.mini .nav-li > form > button.sim-hover::before {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
    width: var(--mini-badge, 2.75rem) !important;
    height: var(--mini-badge, 2.75rem) !important;
    border-radius: 9999px;
  }
  .sidebar.mini .nav-li > .is-active {
    background: transparent !important;
  }
  .sidebar.mini .nav-li > .is-active::before {
    inset: auto;
    left: 50%;
    top: 50%;
    width: var(--mini-badge, 2.75rem) !important;
    height: var(--mini-badge, 2.75rem) !important;
    border-radius: 9999px;
    z-index: 0;
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
  }
  .sidebar.mini .nav-li > .is-active:hover::before,
  .sidebar.mini .nav-li > .is-active:focus-visible::before {
    width: var(--mini-badge, 2.75rem) !important;
    height: var(--mini-badge, 2.75rem) !important;
    transform: translate(-50%, -50%) scale(1);
  }
  .sidebar.mini .menu .nav-li > a,
  .sidebar.mini .menu .nav-li > button,
  .sidebar.mini .menu .nav-li > form > button {
    min-height: var(--mini-badge, 2.75rem);
  }

  .sidebar .menu > li.nav-li:nth-of-type(1) > a::before,
  .sidebar .menu > li.nav-li:nth-of-type(1) > button::before {
    background: #f5a623 !important;
  }
  .sidebar .menu > li.nav-li:nth-of-type(2) > a::before,
  .sidebar .menu > li.nav-li:nth-of-type(2) > button::before {
    background: #79aefe !important;
  }
  .sidebar .menu > li.nav-li:nth-of-type(3) > a::before,
  .sidebar .menu > li.nav-li:nth-of-type(3) > button::before {
    background: #253975 !important;
  }
  .sidebar .menu > li.nav-li:nth-of-type(4) > a::before,
  .sidebar .menu > li.nav-li:nth-of-type(4) > button::before {
    background: #279636 !important;
  }
  .sidebar .menu > li.nav-li:nth-of-type(5) > a::before,
  .sidebar .menu > li.nav-li:nth-of-type(5) > button::before {
    background: #7d5d81 !important;
  }
  .sidebar .menu > li.nav-li:nth-of-type(6) > a::before,
  .sidebar .menu > li.nav-li:nth-of-type(6) > button::before {
    background: #374151 !important;
  }
  .sidebar .menu > li.nav-li:nth-of-type(7) > a::before,
  .sidebar .menu > li.nav-li:nth-of-type(7) > button::before {
    background: #0f766e !important;
  }
  .sidebar .nav-li > form > button::before {
    background: #7c2d12 !important;
  }
}

/* Active State */
@layer components {
  .sidebar .is-active {
    @apply text-white;
    background: #d97706 !important;
    box-shadow: 0 1px 1px rgb(0 0 0 / 0.05) !important;
    outline: 0 !important;
  }
  /* Only stretch active background when NOT in mini mode. In mini,
     we use a centered circular badge defined earlier. */
  .sidebar:not(.mini) .nav-li > .is-active::before {
    width: 100% !important;
    background: #d97706 !important;
    transition: none !important; /* cegah animasi ulang pada parent aktif */
  }
  .sidebar .is-active .material-icons {
    color: currentColor !important;
  }
  .sidebar .nav-li > a.is-active:hover,
  .sidebar .nav-li > button.is-active:hover,
  .sidebar .nav-li > form > button.is-active:hover {
    filter: brightness(0.98);
  }
  /* aktif tetap boleh transisi (default) */
  .sidebar .nav-li > ul a.is-active {
    background: #d97706 !important;
    color: #fff !important;
    border-radius: 0.75rem;
  }
}

/* ===================== ICON ANIMATIONS ===================== */
@layer components {
  .ai-pulse {
    animation: ai-pulse 0.5s var(--ease-bouncy, cubic-bezier(0.34, 1.56, 0.64, 1));
  }
  @keyframes ai-pulse {
    0% {
      transform: scale(1);
    }
    30% {
      transform: translateY(-2px) scale(1.1);
    }
    60% {
      transform: translateY(0) scale(0.98);
    }
    100% {
      transform: scale(1);
    }
  }

  .ai-ticket {
    animation: ai-ticket 0.5s var(--ease-bouncy, cubic-bezier(0.34, 1.56, 0.64, 1));
  }
  @keyframes ai-ticket {
    10% {
      transform: rotate(-10deg) translateX(-1px);
    }
    30% {
      transform: rotate(12deg) translateX(1px);
    }
    50% {
      transform: rotate(-8deg);
    }
    70% {
      transform: rotate(6deg);
    }
    100% {
      transform: rotate(0deg);
    }
  }

  .ai-check {
    animation: ai-check 0.5s var(--ease-smooth, cubic-bezier(0.22, 0.61, 0.36, 1));
  }
  @keyframes ai-check {
    0% {
      transform: scale(1) rotate(0);
      filter: drop-shadow(0 0 0 rgba(16, 185, 129, 0));
    }
    35% {
      transform: scale(1.18) rotate(-10deg);
      filter: drop-shadow(0 0 6px rgba(16, 185, 129, 0.6));
    }
    100% {
      transform: scale(1) rotate(0);
      filter: drop-shadow(0 0 0 rgba(16, 185, 129, 0));
    }
  }

  .ai-folder {
    animation: ai-folder 0.55s var(--ease-smooth, cubic-bezier(0.22, 0.61, 0.36, 1));
    transform-origin: 50% 0%;
  }
  @keyframes ai-folder {
    0% {
      transform: rotateX(0) translateY(0);
    }
    35% {
      transform: rotateX(25deg) translateY(-1px);
    }
    100% {
      transform: rotateX(0) translateY(0);
    }
  }

  .ai-pop {
    animation: ai-pop 0.45s var(--ease-bouncy, cubic-bezier(0.34, 1.56, 0.64, 1));
  }
  @keyframes ai-pop {
    0% {
      transform: scale(1);
    }
    40% {
      transform: scale(1.12);
    }
    100% {
      transform: scale(1);
    }
  }

  .ai-gear {
    animation: ai-gear 0.6s linear;
  }
  @keyframes ai-gear {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }

  .ai-theme {
    animation: ai-theme 0.55s var(--ease-bouncy, cubic-bezier(0.34, 1.56, 0.64, 1));
  }
  @keyframes ai-theme {
    0% {
      transform: rotate(0deg) scale(1);
    }
    50% {
      transform: rotate(180deg) scale(1.1);
    }
    100% {
      transform: rotate(360deg) scale(1);
    }
  }

  .ai-slide {
    animation: ai-slide 0.5s var(--ease-smooth, cubic-bezier(0.22, 0.61, 0.36, 1));
  }
  @keyframes ai-slide {
    0% {
      transform: translateX(0);
    }
    40% {
      transform: translateX(6px);
    }
    100% {
      transform: translateX(0);
    }
  }

  .ai-pin {
    animation: ai-pin 0.5s var(--ease-bouncy, cubic-bezier(0.34, 1.56, 0.64, 1));
    transform-origin: 30% 15%;
  }
  @keyframes ai-pin {
    0% {
      transform: rotate(0) scale(1);
    }
    35% {
      transform: rotate(-25deg) scale(1.1);
    }
    100% {
      transform: rotate(0) scale(1);
    }
  }
}

/* Submenu hover */
@layer components {
  .sidebar .nav-li > ul a:hover,
  .sidebar .nav-li > ul a:focus-visible {
    background: #facc15 !important;
    color: #111 !important;
    border-radius: 0.75rem;
  }
  .dark .sidebar .nav-li > ul a:hover,
  .dark .sidebar .nav-li > ul a:focus-visible {
    background: rgb(245 158 11) !important;
    color: #fff !important;
    border-radius: 0.75rem;
  }
}

/* ===================== RIPPLE EFFECT ===================== */
@layer components {
  .sb-ripple {
    position: relative;
    overflow: hidden;
    isolation: isolate;
  }
  .sb-ripple > * {
    position: relative;
    z-index: 1;
  }
  .sb-ripple .ripple-ink {
    position: absolute;
    border-radius: 9999px;
    pointer-events: none;
    z-index: 0;
    background: currentColor;
    opacity: 0.15;
    transform: scale(0);
    animation: sb-ripple 0.6s var(--ease-smooth) forwards;
  }
  .dark .sb-ripple .ripple-ink {
    opacity: 0.2;
  }
  @keyframes sb-ripple {
    to {
      transform: scale(1);
      opacity: 0;
    }
  }

  /* Badge ping untuk tombol grup saat submenu diklik */
  .sb-badge-anim {
    animation: sb-badge-pulse 0.5s var(--ease-bouncy, cubic-bezier(0.34, 1.56, 0.64, 1));
  }
  @keyframes sb-badge-pulse {
    0% {
      transform: scale(1);
      box-shadow: 0 1px 1px rgb(0 0 0 / 0.05);
    }
    30% {
      transform: scale(1.03);
      box-shadow:
        0 6px 16px -8px rgb(0 0 0 / 0.35),
        0 0 0 6px rgb(245 158 11 / 0.25);
    }
    100% {
      transform: scale(1);
      box-shadow: 0 1px 1px rgb(0 0 0 / 0.05);
    }
  }
}

/* ===== Status Badge (Light & Dark) ===== */
@layer components {
  .status-badge {
    @apply inline-flex items-center rounded-full px-2 py-0.5 text-xs font-semibold ring-2 ring-inset tracking-tight;
  }
  .status-badge[data-status='new'] {
    @apply bg-blue-200    text-blue-900    ring-blue-500/40;
  }
  .status-badge[data-status='in_progress'],
  .status-badge[data-status='on_progress'],
  .status-badge[data-status='pending'] {
    @apply bg-amber-200   text-amber-900   ring-amber-600/40;
  }
  .status-badge[data-status='confirmation'] {
    @apply bg-indigo-200  text-indigo-900  ring-indigo-600/40;
  }
  .status-badge[data-status='revision'] {
    @apply bg-rose-200    text-rose-900    ring-rose-600/40;
  }
  .status-badge[data-status='done'],
  .status-badge[data-status='completed'] {
    @apply bg-emerald-200 text-emerald-900 ring-emerald-600/40;
  }
  .status-badge[data-status='unknown'],
  .status-badge:not([data-status]) {
    @apply bg-gray-200    text-gray-900    ring-gray-600/30;
  }
  .dark .status-badge[data-status='new'] {
    @apply bg-blue-400    text-gray-900 ring-blue-200;
  }
  .dark .status-badge[data-status='in_progress'],
  .dark .status-badge[data-status='on_progress'],
  .dark .status-badge[data-status='pending'] {
    @apply bg-amber-500   text-white    ring-amber-300;
  }
  .dark .status-badge[data-status='confirmation'] {
    @apply bg-indigo-500  text-white    ring-indigo-300;
  }
  .dark .status-badge[data-status='revision'] {
    @apply bg-rose-500    text-white    ring-rose-300;
  }
  .dark .status-badge[data-status='done'],
  .dark .status-badge[data-status='completed'] {
    @apply bg-emerald-400 text-gray-900 ring-emerald-200;
  }
  .dark .status-badge[data-status='unknown'],
  .dark .status-badge:not([data-status]) {
    @apply bg-slate-400    text-slate-900 ring-slate-200;
  }
  @media (prefers-contrast: more) {
    .status-badge {
      @apply ring-2;
    }
  }

  /* Status Chip (Alternative style) */
  .status-chip {
    @apply inline-flex items-center gap-1 rounded-full px-2.5 py-1 text-xs font-semibold tracking-wide transition-colors;
  }
  .status-chip .material-icons {
    font-size: 14px;
  }
  .status-chip[data-status='new'] {
    @apply bg-blue-100 text-blue-700 dark:bg-blue-900/40 dark:text-blue-200;
  }
  .status-chip[data-status='in_progress'],
  .status-chip[data-status='on_progress'] {
    @apply bg-amber-100 text-amber-700 dark:bg-amber-900/40 dark:text-amber-200;
  }
  .status-chip[data-status='done'],
  .status-chip[data-status='completed'] {
    @apply bg-emerald-100 text-emerald-700 dark:bg-emerald-900/40 dark:text-emerald-200;
  }
  .status-chip[data-status='confirmation'] {
    @apply bg-sky-100 text-sky-700 dark:bg-sky-900/40 dark:text-sky-200;
  }
  .status-chip[data-status='revision'] {
    @apply bg-fuchsia-100 text-fuchsia-700 dark:bg-fuchsia-900/40 dark:text-fuchsia-200;
  }
  .status-chip:not([data-status]) {
    @apply bg-slate-100 text-slate-600 dark:bg-slate-700 dark:text-slate-300;
  }
}

/* ========= TABLE HEAD SILVER ========= */
@layer components {
  .table-head-silver th {
    @apply bg-gray-100 text-gray-700 border-y border-gray-200 font-semibold;
  }
  .dark .table-head-silver th {
    @apply bg-gray-700 text-gray-100 border-gray-600;
  }
  .table-head-silver th:first-child {
    @apply rounded-tl-lg;
  }
  .table-head-silver th:last-child {
    @apply rounded-tr-lg;
  }
}

/* ========================= Stabilitas scroll ========================= */
@layer base {
  html {
    scrollbar-gutter: stable;
  }
  @supports not (scrollbar-gutter: stable) {
    html {
      overflow-y: scroll;
    }
  }

  /* Spacer animasi halus (ikut sidebar) */
  .sb-spacer {
    width: var(--sb-space, 0px);
    transition: width 0.38s var(--ease-smooth);
    will-change: width;
    contain: layout paint size;
  }

  /* === TOPBAR FINAL OVERRIDES (PASTIKAN PALING BAWAH) === */
  .topbar__logo {
    background: none !important;
    border-radius: 0 !important;
    box-shadow: none !important;
    width: 36px !important;
    height: 36px !important;
    color: inherit !important;
    transition: transform 0.2s ease !important;
  }

  .topbar__logo:hover {
    transform: scale(1.05) !important;
  }

  .topbar__right,
  .topbar__actions {
    display: flex !important;
    align-items: center !important;
    gap: 0.65rem !important;
    flex-wrap: nowrap !important; /* kunci horizontal */
    white-space: nowrap !important; /* cegah turun baris */
    min-width: max-content !important; /* paksa cukup ruang */
    flex: 0 0 auto !important;
  }

  .topbar__brand {
    gap: 0.3rem !important;
  }

  .topbar__brand-text {
    margin-left: -0.5rem !important;
  }

  .topbar-search input[type='search'] {
    padding-left: 4rem !important;
  }

  .topbar-search__icon {
    inset-inline-start: 1.5rem !important;
    font-size: 1rem !important;
  }

  .topbar-search {
    max-width: 520px !important;
  } /* beri ruang ke kanan */

  .topbar-dropdown {
    background-color: #ffffff !important; /* solid, tidak tembus */
    backdrop-filter: none !important;
    box-shadow: 0 28px 60px -28px rgba(15, 23, 42, 0.45) !important;
  }
  .dark .topbar-dropdown {
    background-color: #0f172a !important;
    backdrop-filter: none !important;
    box-shadow: 0 28px 60px -28px rgba(0, 0, 0, 0.85) !important;
  }
}

/* Force animations even if OS requests reduced motion */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    transition-property: all !important;
    transition-duration: 0.25s !important;
    transition-timing-function: ease !important;
    animation-duration: 0.25s !important;
    animation-iteration-count: 1 !important;
  }
}
